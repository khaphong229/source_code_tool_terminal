import requests
url = "https://www.instagram.com/haduhicream"
ck = 'ig_did=D24E7939-2E65-4574-B61C-5AADA2343354; ig_nrcb=1; mid=YtvW3QAEAAHYAZJfUnNs3JBTldno; fbm_124024574287414=base_domain=.instagram.com; datr=SZ38YnND2cPUE2Vs2tED8Cq6; shbid="16504\05444054686595\0541692258513:01f79f9b40428dba6b0181c374fa967c5d02449c26a86416a8f3c126a3ddcdd39232c6f2"; shbts="1660722513\05444054686595\0541692258513:01f7ec96ab0be6e2e8697825e5f50ab2dfe5642857ed0685a2517972ad008149599c23a7"; fbsr_124024574287414=wA4HjkGxT1nrkXwp_1QENWZZ9V7UiniFAIY1DndZPIA.eyJ1c2VyX2lkIjoiMTAwMDE0MTU5NDExNTYyIiwiY29kZSI6IkFRQnpIMm9MZGtfaDBDSjkydDhCRzJiNnk3MEpjcFZ2U0tjMlZZRUhtbENlTmJFdjl1RmN5Wnk1ZTg1Q0pzRkk1Ny1lc0NUTTF4ejVyY1BaWW5UaGJxbzZQeWxTT3RRamI2R213MjN3dDFfTW1yVGx5ZzFkaG1Fa01KRmJQcUdqWUJERE9zU2x0OTNWVDZnQ25Fc1k1c0hOZnRXTXBwY0RXVXZjdGJvdUxJUkNPU0lmSkoxbFgydVNSYXhjSUlWUmhCRGxVLVIxb3VrV0xYRnBvanVXX3JtcmJfMkx5RURfMGZuaTQ4YXVCSkR5VXZVMlpUYzdiU092T2V3bGhOT0ZZTVNrNmNsMjJSVWZSNDVjdHZPVWp1amkyOHNyVWdHV28wYjgtaV9ScEsxWFZfaWY4T0RZaEMtYlNOVGF1Tkh2eDhfRkRLS0hwTDVyU015cEltWW1mcFpKb0VhT2w1UFJ1cEhES1Y1YVNTOHZQQSIsIm9hdXRoX3Rva2VuIjoiRUFBQnd6TGl4bmpZQkFMY2hXZUNTWHd3M05ORDd6eEVUeDA5SzZGbUV5VmJyTHRCSVYxZ0FQamZKdno5ZEl6UnB1WkFOdFpCWkM1Z1IwczloYlZvWkJBSmNXdlpCaXB1Z2cxQXA5M0kzOWpYOWVQMXlzNlpDS2Q1S2Npd2ZNcTJTTEpMT2ZmMVF3ejBTUmtFOVg2WHBVSGVNd0xuV293M3BqMVpBZVBRMEd5MXRTckZWNXFRdGVLN2h3eURhVURlU1F1WkJwV29EdHpCZ1B3WkRaRCIsImFsZ29yaXRobSI6IkhNQUMtU0hBMjU2IiwiaXNzdWVkX2F0IjoxNjYwODE3ODIxfQ; sessionid=40509112485%3AFEhEgh3AEV5sEO%3A23%3AAYcJa4opcYJSGkRGeSk4JXE6XoM5lfu6q39Oitj_sw; ds_user_id=40509112485; csrftoken=yW81n7GLnBeKzuhCm3E9NwvSLls7EBw3; fbsr_124024574287414=wA4HjkGxT1nrkXwp_1QENWZZ9V7UiniFAIY1DndZPIA.eyJ1c2VyX2lkIjoiMTAwMDE0MTU5NDExNTYyIiwiY29kZSI6IkFRQnpIMm9MZGtfaDBDSjkydDhCRzJiNnk3MEpjcFZ2U0tjMlZZRUhtbENlTmJFdjl1RmN5Wnk1ZTg1Q0pzRkk1Ny1lc0NUTTF4ejVyY1BaWW5UaGJxbzZQeWxTT3RRamI2R213MjN3dDFfTW1yVGx5ZzFkaG1Fa01KRmJQcUdqWUJERE9zU2x0OTNWVDZnQ25Fc1k1c0hOZnRXTXBwY0RXVXZjdGJvdUxJUkNPU0lmSkoxbFgydVNSYXhjSUlWUmhCRGxVLVIxb3VrV0xYRnBvanVXX3JtcmJfMkx5RURfMGZuaTQ4YXVCSkR5VXZVMlpUYzdiU092T2V3bGhOT0ZZTVNrNmNsMjJSVWZSNDVjdHZPVWp1amkyOHNyVWdHV28wYjgtaV9ScEsxWFZfaWY4T0RZaEMtYlNOVGF1Tkh2eDhfRkRLS0hwTDVyU015cEltWW1mcFpKb0VhT2w1UFJ1cEhES1Y1YVNTOHZQQSIsIm9hdXRoX3Rva2VuIjoiRUFBQnd6TGl4bmpZQkFMY2hXZUNTWHd3M05ORDd6eEVUeDA5SzZGbUV5VmJyTHRCSVYxZ0FQamZKdno5ZEl6UnB1WkFOdFpCWkM1Z1IwczloYlZvWkJBSmNXdlpCaXB1Z2cxQXA5M0kzOWpYOWVQMXlzNlpDS2Q1S2Npd2ZNcTJTTEpMT2ZmMVF3ejBTUmtFOVg2WHBVSGVNd0xuV293M3BqMVpBZVBRMEd5MXRTckZWNXFRdGVLN2h3eURhVURlU1F1WkJwV29EdHpCZ1B3WkRaRCIsImFsZ29yaXRobSI6IkhNQUMtU0hBMjU2IiwiaXNzdWVkX2F0IjoxNjYwODE3ODIxfQ; rur="VLL\05440509112485\0541692354012:01f7c33ca44e9b92c3ed2b7dfc6600db0eab92ef751287acfd1d6550470b41a35b96e0d0"; useragent=TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTAyLjAuMC4wIFNhZmFyaS81MzcuMzY%3D; _uafec=Mozilla%2F5.0%20(Windows%20NT%206.1%3B%20Win64%3B%20x64)%20AppleWebKit%2F537.36%20(KHTML%2C%20like%20Gecko)%20Chrome%2F102.0.0.0%20Safari%2F537.36;'
csrftoken = ck.split('csrftoken=')[1].split(';')[0]
head = {
"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.66 Safari/537.36",
"cookie":ck,
}
id = requests.get(url+"/?__a=1",headers=head).text.split('"lid":"')[1].split('"')[0]
url = f"https://www.instagram.com/web/friendships/{id}/follow/"
print(id)
headers = {
"x-ig-app-id": "1217981644879628",
"x-asbd-id": "198387",
# "x-ig-www-claim":self.www,
"x-instagram-ajax": "c161aac700f",
"accept": "*/*",
"content-length": "0",
"content-type": "application/x-www-form-urlencoded",
"user-agent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.66 Safari/537.36",
"x-csrftoken": ck.split('csrftoken=')[1].split(';')[0],
"x-requested-with": "XMLHttpRequest",
"cookie": ck,
}
r = requests.post(url,data="",headers=headers).text
print(r)